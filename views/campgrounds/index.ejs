<% layout('/layout/boilerplate') %>

<body>
    <div id="map" style="width: 100%; height: 500px"></div>
    <h1>All Campgrounds</h1>
    <div>
        <a href="/campgrounds/new">Add new Camps</a>
    </div>

    <ul>
        <% for (let campground of campgrounds){%>
        <div class="card" mb-3>
            <div class="row">
                <div class="col-md-4">
                    <% if(campground.images.length) { %>
                    <img src="<%=campground.images[0].url%> " alt="" class="img-fluid">
                    <% } else {%>
                    <img src="https://res.cloudinary.com/dh9y1pv65/image/upload/v1663358673/CampApp/duca2qgrge4ha4mzofi7.jpg"
                        alt="" class="img-fluid">
                    <% } %>
                </div>
                <div class="col-md-8">
                    <div class="card-body">
                        <h5 class="card-title">
                            <%=campground.title%>
                        </h5>
                        <p class="card-text">
                            <%=campground.description%>
                        </p>
                        <p class="card-text">
                            <small class="text-muted">
                                Location: <%=campground.title%>
                            </small>
                        </p>
                        <a href="campgrounds/<%=campground._id%>" class="btn btn-primary">View
                            <%=campground.title%>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <!-- <li>
                    <a href="/campgrounds/<%= campground._id %>">
                        <%= campground.title %>
                    </a></a>
                </li> -->
        <% }%>
    </ul>

    <script>
        mapToken='<%-process.env.MAPBOX_TOKEN%>'
        campgrounds={ features: <%-JSON.stringify(campgrounds)%> }
    </script>

    <script src="/javascripts/mapCluster.js"></script>